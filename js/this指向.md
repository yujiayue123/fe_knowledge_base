## this 指向

在 js 种，this 的指向判断大致为以下几种：

### 普通函数和箭头函数

#### 普通函数

当一个函数被调用时，它的 this 值取决于调用方式。如果使用普通函数调用方式（如 func()），则 this 会指向全局对象 window；如果使用方法调用方式（如 obj.func()），则 this 会指向调用该方法的对象。

this 指向是动态的

#### 箭头函数

箭头函数不具有自己的 this 值，它会捕获上下文中的 this 值。因此，如果在箭头函数中访问 this，它将引用**外层作用域**中的 this 值。

this 指向不会变

### 使用 apply、call 和 bind 方法

#### call、apply 和 bind 区别：

apply、call 和 bind 方法可以改变函数执行时的 this 值。其中，apply 和 call 方法可以立即执行函数并传入参数，而 bind 方法可以返回一个新函数，该函数的 this 值被绑定到指定的对象上。
相同点：

作用相同，都是动态修改 this 指向；都不会修改原先函数的 this 指向。

异同点：

1. 执行方式不同：

- call 和 apply 是改变后页面加载之后就立即执行，是同步代码。

- bind 是异步代码，改变后不会立即执行；而是返回一个新的函数。

2. 传参方式不同：

- call 和 bind 传参是一个一个逐一传入，不能使用剩余参数的方式传参。

- apply 可以使用数组的方式传入的，只要是数组方式就可以使用剩余参数的方式传入。

3. 修改 this 的性质不同：

- call、apply 只是临时的修改一次，也就是 call 和 apply 方法的那一次；当再次调用原函数的时候，它的指向还是原来的指向。
- bind 返回一个修改过后新的函数，此函数的 this 永远被改变了，绑定了就修改不了了。

### DOM 事件处理程序的使用

在处理 DOM 事件时，浏览器会将事件处理程序内部的 this 指向触发事件的元素。但是，在使用 addEventListener 方法绑定事件处理程序时，this 会指向全局对象 window，而不是目标元素。

### 对象的嵌套和继承

当一个对象被嵌套在另一个对象中或者使用继承时，this 的指向可能会变得混乱。这是因为 this 的指向取决于函数被调用时的上下文环境，而不是对象本身。因此，在嵌套对象或继承类中使用 this 时，需要特别注意它的指向。
